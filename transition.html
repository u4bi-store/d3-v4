<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>u4bi d3 - transition</title>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <style>
            body{ background: #F2F2F2; margin: 0; }

            .root{
                margin: auto;
                margin-top : 100px;
                width: 400px;
                height: 400px;
                border: 1px solid #666;
            }

            .bar {
                height: 30px;
                color: green;
                fill: lightgreen;
                stroke: black;
                stroke-width: 1;
            }            
        </style>
    </head>
    <body>



        <div class="root"></div>



        
        <script>
            console.log(d3.version);

            d3.json('model/data.json', (error, json) => {

                let update = d3.select('.root')
                                .append('svg')
                                .attr('width', '100%')
                                .attr('height', '100%')
                                .selectAll('rect')
                                .data(json.data)

                function render(){
                    let enter = update.enter()
                                .append('rect')
                                .attr('x', 0)
                                .attr('y', (v, i) => i * 33)
                                .style('width', v => v.score+ '%')
                                .attr('class', 'bar')
                    
                    enter.transition()
                            .duration(2000)
                            .delay(500)
                            .attr('x', 300)
                            // .style('width', v => (v.score * 2 )+ '%')
                            // .remove()
                }

                render();

                // d3.interval(render, 2500);

            });
            
        </script>
    </body>
</html>